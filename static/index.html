<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Lotto v3.1-final (Clean)</title>
  
  <!-- 외부 원격 스크립트 차단(자체 파일만 허용) -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self';"/>

  <!-- 파비콘 404 방지: data URI 사용 -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='64' height='64' fill='%23101419'/%3E%3Ctext x='32' y='42' text-anchor='middle' font-size='36' fill='%23a78bfa'%3EL%3C/text%3E%3C/svg%3E"/>

  <!-- 기본 스타일 -->
  <link rel="icon" href="/static/favicon.ico" />
  <!-- ✅ 밝기/가독성 개선 톤 추가 (버전 쿼리로 캐시 방지) -->
  <link rel="stylesheet" href="/static/styles.css"/>
  <link rel="stylesheet" href="/static/styles.tone.css?v=2"/>
  
    <!-- 주입 에러 무시(확장 스크립트로 인한 실행 중단 방지) -->
  <script>
    window.addEventListener('error', function(e){
      var msg = String(e.message || '');
      if (msg.indexOf('Cannot redefine property: ethereum') > -1) {
        e.preventDefault(); return false;
      }
    }, true);
  </script>
</head>
<body>
  <div class="container">
  
    <header>
      <h1>로또 예측 시스템 <span class="badge">v3.1-final</span></h1>
      <div class="status">
        <div>상태: <b id="apiStatus">확인 중…</b></div>
        <div id="statusRight" class="right">직전 회차 로딩중…</div>
      </div>
    </header>

    <section>
      <h2>① 예측 번호 조회</h2>
      <div class="controls">
        <button id="btnPredict">예측 번호 뽑기</button>
        <span class="small subtle">버튼 클릭 시만 생성 · 근거(%) 표시</span>
      </div>
      <div id="bestBlock" class="card section-grid"></div>
    </section>

    <section>
      <h2>② 이번 주 추천 전략</h2>
      <div id="weeklyBlock" class="grid-3"></div>
    </section>

    <section>
      <h2>③ 전략별 추천 (각 5세트)</h2>
      <div id="byStrategyBlock" class="section-grid"></div>
    </section>

    <section>
      <h2>④ 최근 10회 결과</h2>
      <div class="controls">
        <label>기준 회차
          <input id="inpEndDraw" type="number" class="mono" placeholder="예: 1193" list="dlDraws"/>
          <datalist id="dlDraws"></datalist>
        </label>
        <button id="btnRecent">조회</button>
        <span class="small subtle">기본: 최신 기준 10회</span>
      </div>
      <div id="recentBlock" class="card section-grid"></div>
    </section>

    <section>
      <h2>⑤ 구간별 번호 빈도</h2>
      <div class="controls">
        <label>기준 회차
          <input id="inpEndDraw2" type="number" class="mono" placeholder="예: 1193" list="dlDraws2"/>
          <datalist id="dlDraws2"></datalist>
        </label>
        <label>조회 회차(N)
          <select id="selWindow">
            <option value="10">10회</option><option value="5">5회</option>
            <option value="20">20회</option><option value="30">30회</option>
          </select>
        </label>
        <button id="btnRange">조회</button>
      </div>
      <div id="rangeBlock" class="grid-3"></div>
    </section>
  </div>

  <!-- ✅ JS 캐시 깨기 (버전 쿼리 추가) -->
<script src="/static/app.js?v=2"></script>
</body>
</html>
